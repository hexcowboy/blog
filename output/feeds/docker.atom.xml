<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>hexcowboy - Docker</title><link href="https://hex.cowboy.dev/" rel="alternate"></link><link href="https://hex.cowboy.dev/feeds/docker.atom.xml" rel="self"></link><id>https://hex.cowboy.dev/</id><updated>2021-06-13T10:30:00-05:00</updated><entry><title>Running Burp Suite in Docker</title><link href="https://hex.cowboy.dev/running-burp-suite-in-docker.html" rel="alternate"></link><published>2021-06-13T10:30:00-05:00</published><updated>2021-06-13T10:30:00-05:00</updated><author><name>hexcowboy</name></author><id>tag:hex.cowboy.dev,2021-06-13:/running-burp-suite-in-docker.html</id><summary type="html">&lt;p&gt;Quickly install Burp Suite on Docker in a matter of seconds, not minutes.&lt;/p&gt;</summary><content type="html">&lt;p&gt;On my soul quest to create &lt;a href="https://github.com/hexcowboy/saloon"&gt;a fully featured penetration testing Docker container&lt;/a&gt;, I came across a few issues.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Docker doesn't run graphical applications on it's own&lt;/li&gt;
&lt;li&gt;The network proxy won't work unless the &lt;code&gt;8080&lt;/code&gt; port is exposed&lt;/li&gt;
&lt;li&gt;You can't just install Burp Suite with &lt;code&gt;apt-get install burpsuite&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Apart from these issues, there isn't a maintained Burp Suite Community repository in the Docker Hub or on GitHub. I did manage to find a maintained &lt;a href="https://github.com/koenrh/docker-burp-suite-pro"&gt;Burp Suite Professional Docker repo&lt;/a&gt; on GitHub which I ended up forking.&lt;/p&gt;
&lt;h2&gt;Setup&lt;/h2&gt;
&lt;p&gt;To make this Docker container run GUI applications, we can make use of an X Server. On macOS, I used &lt;a href="https://www.xquartz.org/"&gt;XQuartz&lt;/a&gt; which was as simple as running&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;brew install --cask xquartz
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;For accepting connections on local host, one setting needs to be changed. In the XQuartz settings, enable &lt;code&gt;XQuartz&lt;/code&gt; &amp;gt; &lt;code&gt;Preferences&lt;/code&gt; &amp;gt; &lt;code&gt;Security&lt;/code&gt; &amp;gt; &lt;code&gt;Allow connections from network clients&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Allow connections from network clients needs to be enabled in the XQuartz settings" src="https://user-images.githubusercontent.com/8162609/121715279-4a9a3700-caa4-11eb-8205-fff0fb5dfbf6.png"&gt;&lt;/p&gt;
&lt;p&gt;Now the X Server can be started by running this command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;xhost + &lt;span class="m"&gt;127&lt;/span&gt;.0.0.1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;em&gt;Note that you need to run this command from your host terminal, not the XQuartz terminal.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;I won't go into covering how to run a local X Server on Windows or Linux, because Google &lt;strong&gt;does&lt;/strong&gt; exist.&lt;/p&gt;
&lt;h2&gt;Running Burp Suite&lt;/h2&gt;
&lt;h3&gt;From Docker Hub&lt;/h3&gt;
&lt;p&gt;The prebuilt container can be retrieved from &lt;a href="https://hub.docker.com/repository/docker/hexcowboy/burpsuite"&gt;Docker Hub&lt;/a&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;docker pull hexcowboy/burpsuite
docker image tag hexcowboy/burpsuite burpsuite
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;Building the image&lt;/h3&gt;
&lt;p&gt;First, clone this &lt;a href="https://github.com/hexcowboy/docker-burp-suite-community"&gt;GitHub repository&lt;/a&gt; on your host:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;git clone https://github.com/hexcowboy/docker-burp-suite-community.git &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nb"&gt;cd&lt;/span&gt; docker-burp-suite-community
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Then, build the Docker image using the following command.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;docker build -t burpsuite .
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;While building the image, the latest JAR (Java ARchive) of Burp Suite Community is pulled from the PortSwigger portal.&lt;/p&gt;
&lt;h2&gt;Using Burp Suite Community&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;docker run --rm &lt;span class="se"&gt;\&lt;/span&gt;
  -p &lt;span class="m"&gt;8080&lt;/span&gt;:8080 &lt;span class="se"&gt;\&lt;/span&gt;
  burpsuite
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;This command will run the container, expose port 8080 on the host to port 8080 on the container, and delete the container afterwards. You should see a new window open up in your X Server if you followed the setup instructions above.&lt;/p&gt;
&lt;h3&gt;Verify that the proxy is working by running the following command on your host:&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;curl -x http://127.0.0.1:8080 http://example.com
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;Software can easily be Dockerized. Burp Suite Community could likely take 5+ minutes to install manually, but by pulling a prebuilt Docker image it can take just seconds.&lt;/p&gt;
&lt;p&gt;Don't limit yourself to just using Docker for my-first-blog applications.&lt;/p&gt;</content><category term="Docker"></category><category term="docker"></category><category term="burpsuite"></category></entry></feed>